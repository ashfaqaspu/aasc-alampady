<!DOCTYPE html>
<html>
<head>
  <title>Yearly Report</title>

  <style>
    * { box-sizing: border-box; }

    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: #f4f6f9;
      padding: 30px 20px;
      color: #333;
    }

    h2 {
      text-align: center;
      color: #0d47a1;
      margin-bottom: 22px;
      font-size: 26px;
    }

    /* Filter */
    .filter {
      max-width: 420px;
      margin: 0 auto 24px;
      background: #ffffff;
      padding: 16px;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    input[type="number"] {
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      width: 120px;
    }

    button {
      padding: 10px 18px;
      background: #0d47a1;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }

    button:hover {
      background: #08306b;
    }

    /* Summary */
    .summary {
      max-width: 900px;
      margin: 0 auto 20px;
      background: #e3f2fd;
      padding: 16px 18px;
      border-radius: 14px;
      border-left: 6px solid #0d47a1;
      font-size: 15px;
      font-weight: 600;
    }

    /* Table */
    .table-wrapper {
      max-width: 900px;
      margin: auto;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      background: #0d47a1;
      color: white;
      padding: 14px 16px;
      text-align: left;
      font-size: 14.5px;
    }

    td {
      padding: 14px 16px;
      border-bottom: 1px solid #eef1f5;
      font-size: 14.5px;
    }

    tr:last-child td {
      border-bottom: none;
    }

    tr:hover td {
      background: #f5f8ff;
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }

      .filter {
        display: none;
      }

      th {
        background: #ddd !important;
        color: black !important;
      }

      .table-wrapper {
        box-shadow: none;
        border-radius: 0;
      }
    }
  </style>
</head>

<body>

<h2>üìä Yearly Attendance Report</h2>

<!-- FILTER -->
<form method="get" class="filter">
  <input type="number"
         name="year"
         placeholder="2026"
         value="{{ request.args.get('year', '') }}"
         required>

  <button type="submit">View</button>
</form>

<!-- SUMMARY -->
<div class="summary">
  ‚è± <b>Total Meeting Time (Year):</b>
  {{ total_meeting_time or "‚Äî" }}
</div>

<!-- TABLE -->
<div class="table-wrapper">
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Total Meeting Time</th>
      <th>Total Minutes Attended</th>
    </tr>
  </thead>

  <tbody>
    {% if data and data|length > 0 %}
      {% for d in data %}
      <tr>
        <td>{{ d[0] }}</td>
        <td>{{ total_meeting_time or "‚Äî" }}</td>
        <td>{{ d[1] }}</td>
      </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="3" style="text-align:center;">
          No attendance data available for selected year
        </td>
      </tr>
    {% endif %}
  </tbody>
</table>
</div>

<!-- BACK BUTTON -->
<div style="margin-top:20px;">
  <a href="{{ url_for('portal.committee_dashboard', cid=cid) }}"
     class="back">
     ‚Üê Back to Committee Dashboard
  </a>
</div>

</body>
</html>