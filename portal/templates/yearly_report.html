<!DOCTYPE html>
<html>
<head>
  <title>Yearly Attendance Report</title>

  <style>
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: #f4f6f9;
      padding: 30px 20px;
      color: #333;
    }

    h2 {
      text-align: center;
      color: #0d47a1;
      margin-bottom: 20px;
    }

    .filter {
      max-width: 420px;
      margin: 0 auto 25px;
      background: #ffffff;
      padding: 16px;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    input[type="number"] {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 120px;
    }

    button {
      padding: 10px 18px;
      background: #0d47a1;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }

    .summary-box {
      max-width: 900px;
      margin: 0 auto 25px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 15px;
    }

    .summary-card {
      background: white;
      padding: 18px;
      border-radius: 14px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      text-align: center;
    }

    .summary-card h4 {
      margin: 0;
      color: #607d8b;
      font-size: 14px;
    }

    .summary-card p {
      margin: 6px 0 0;
      font-size: 20px;
      font-weight: 700;
      color: #0d47a1;
    }

    .table-wrapper {
      max-width: 900px;
      margin: auto;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      background: #0d47a1;
      color: white;
      padding: 14px;
      text-align: left;
    }

    td {
      padding: 14px;
      border-bottom: 1px solid #eef1f5;
    }

    tr:hover td {
      background: #f5f8ff;
    }

    .back {
      display: block;
      text-align: center;
      margin-top: 25px;
      font-weight: 600;
      text-decoration: none;
      color: #0d47a1;
    }
  </style>
</head>

<body>

<h2>üìä Yearly Attendance Report</h2>

<form method="get" class="filter">
  <input type="number"
         name="year"
         placeholder="2026"
         value="{{ request.args.get('year', '') }}"
         required>
  <button type="submit">View</button>
</form>

{% if year %}

<div class="summary-box">

  <div class="summary-card">
    <h4>Total Meetings</h4>
    <p>{{ total_meetings_count }}</p>
  </div>

  <div class="summary-card">
    <h4>Total Meeting Minutes</h4>
    <p>{{ total_meeting_time }}</p>
  </div>

</div>

<div class="table-wrapper">
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Total Minutes Attended</th>
      <th>Attendance %</th>
    </tr>
  </thead>
  <tbody>

    {% if data %}
      {% for d in data %}
      <tr>
        <td>{{ d[0] }}</td>
        <td>{{ d[1] }}</td>
        <td>{{ d[2] }}%</td>
      </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="3" style="text-align:center;">
          No attendance data available
        </td>
      </tr>
    {% endif %}

  </tbody>
</table>
</div>

{% endif %}

<a href="{{ url_for('portal.committee_dashboard', cid=cid) }}"
   class="back">
   ‚Üê Back to Committee Dashboard
</a>

</body>
</html>