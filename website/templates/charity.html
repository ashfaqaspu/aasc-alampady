{% extends "base.html" %}
{% block content %}

<style>
:root {
    --cream:#f7f0e6; --warm-white:#fdf8f2; --sand:#e8d5b7; --sand-dark:#c9b48a;
    --amber:#b8751a; --amber-bright:#d4891f; --amber-pale:#e8c07a;
    --terra:#8b4513; --terra-soft:#c0622a;
    --teal:#2a7a72; --teal-light:#3d9e94; --teal-pale:#d4f0ec;
    --ink:#1a1208; --ink-warm:#3d2e1a; --ink-mid:#6b5540; --ink-soft:#9a8270;
    --shimmer: linear-gradient(105deg, #b8751a 0%, #e8c07a 25%, #d4891f 50%, #e8c07a 75%, #b8751a 100%);
}

@keyframes shimMove { 0%{background-position:0% 50%} 100%{background-position:300% 50%} }
@keyframes fadeUp   { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeIn   { from{opacity:0} to{opacity:1} }
@keyframes pulse    { from{transform:scale(1);opacity:.8} to{transform:scale(1.1);opacity:1} }
@keyframes heartbeat { 0%,100%{transform:scale(1)} 14%{transform:scale(1.15)} 28%{transform:scale(1)} 42%{transform:scale(1.1)} }

.reveal { opacity:0; transform:translateY(28px);
    transition: opacity .75s cubic-bezier(.16,1,.3,1), transform .75s cubic-bezier(.16,1,.3,1); }
.reveal.visible { opacity:1; transform:translateY(0); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.charity-hero {
    position:relative; border-radius:28px; overflow:hidden;
    padding:76px 72px 68px; text-align:center;
    background: linear-gradient(140deg,
        #f2e0c8 0%, #fae8d8 30%, #f5f0e5 60%, #e8f3f1 100%);
    border:1px solid rgba(184,117,26,.22);
    box-shadow:
        0 40px 100px rgba(184,117,26,.16),
        0 8px 32px rgba(0,0,0,.06),
        inset 0 1px 0 rgba(255,255,255,.95);
    margin-bottom:48px;
    animation: fadeIn .6s ease both;
}

.charity-hero::before {
    content:''; position:absolute; top:0; left:0; right:0; height:3px;
    background:var(--shimmer); background-size:300% 100%;
    animation: shimMove 5s linear infinite;
    border-radius:28px 28px 0 0;
}

/* geometric pattern overlay */
.charity-hero-pat {
    position:absolute; inset:0; pointer-events:none;
    background-image:
        radial-gradient(circle at 1px 1px, rgba(192,98,42,.05) 1px, transparent 0);
    background-size:28px 28px;
    opacity:.5;
}

/* warm radial glow center */
.charity-hero-glow {
    position:absolute; inset:0; pointer-events:none;
    background: radial-gradient(ellipse 70% 80% at 50% 50%, rgba(232,192,122,.25) 0%, transparent 65%);
}

.hero-bracket-tl {
    position:absolute; top:20px; left:20px;
    width:42px; height:42px;
    border-top:2px solid rgba(192,98,42,.55);
    border-left:2px solid rgba(192,98,42,.55);
    pointer-events:none;
}
.hero-bracket-br {
    position:absolute; bottom:20px; right:20px;
    width:42px; height:42px;
    border-bottom:2px solid rgba(192,98,42,.55);
    border-right:2px solid rgba(192,98,42,.55);
    pointer-events:none;
}

.page-eyebrow {
    display:inline-flex; align-items:center; gap:12px;
    font-family:'Cinzel',serif; font-size:9.5px;
    letter-spacing:4px; text-transform:uppercase; color:var(--terra-soft);
    margin-bottom:18px;
    animation: fadeUp .7s ease both .1s;
    position:relative;
}
.page-eyebrow::before,.page-eyebrow::after {
    content:''; display:block; width:26px; height:1px;
}
.page-eyebrow::before { background:linear-gradient(90deg,transparent,var(--terra-soft)); }
.page-eyebrow::after  { background:linear-gradient(90deg,var(--terra-soft),transparent); }

.charity-title {
    font-family:'Cinzel',serif; font-size:clamp(28px,5.5vw,62px);
    font-weight:700; color:var(--ink); letter-spacing:6px; line-height:1.05;
    margin:0 0 8px; position:relative;
    animation: fadeUp .8s ease both .15s;
}

.charity-subtitle {
    font-family:'Cormorant Garamond',serif; font-style:italic;
    font-size:clamp(14px,2vw,19px); font-weight:400;
    color:var(--terra-soft); letter-spacing:3px; margin-bottom:28px;
    animation: fadeUp .8s ease both .2s; position:relative;
}

/* animated heart icon */
.charity-heart {
    display:inline-block; font-size:28px; margin-bottom:12px;
    animation: heartbeat 2s ease-in-out infinite;
    position:relative;
}

.hero-orn {
    display:flex; align-items:center; gap:14px; justify-content:center;
    animation: fadeIn 1s ease both .3s; position:relative;
}
.hero-orn-l { width:50px; height:1px; }
.hero-orn-l:first-child { background:linear-gradient(90deg,transparent,rgba(192,98,42,.5)); }
.hero-orn-l:last-child  { background:linear-gradient(90deg,rgba(192,98,42,.5),transparent); }
.hero-orn-c { color:var(--terra-soft); font-size:9px; display:flex; gap:7px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EVENT CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.event-card {
    background: rgba(253,248,242,.94);
    backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px);
    border-radius:22px;
    border:1px solid rgba(184,117,26,.18);
    box-shadow:
        0 24px 70px rgba(184,117,26,.12),
        0 6px 24px rgba(0,0,0,.05),
        inset 0 1px 0 rgba(255,255,255,.9);
    overflow:hidden; margin-bottom:36px;
    transition: transform .35s cubic-bezier(.34,1.56,.64,1), box-shadow .35s, border-color .35s;
    position:relative;
}

.event-card:hover {
    transform:translateY(-6px);
    box-shadow: 0 40px 90px rgba(184,117,26,.18), 0 10px 40px rgba(0,0,0,.07);
    border-color: rgba(184,117,26,.35);
}

/* shimmer top on hover */
.event-card::before {
    content:''; position:absolute; top:0; left:0; right:0; height:3px;
    background:var(--shimmer); background-size:300% 100%;
    animation: shimMove 4s linear infinite;
    opacity:0; transition:opacity .3s; z-index:2;
    border-radius:22px 22px 0 0;
}
.event-card:hover::before { opacity:1; }

/* left accent bar */
.event-card::after {
    content:''; position:absolute; left:0; top:0; bottom:0; width:4px;
    background:linear-gradient(180deg, var(--amber), var(--terra-soft), var(--teal));
    opacity:.7; transition:opacity .3s;
}
.event-card:hover::after { opacity:1; }

/* card text body */
.event-card-body { padding:36px 44px 36px 52px; }

.event-card h3 {
    font-family:'Cormorant Garamond',serif;
    font-size:clamp(20px,2.4vw,26px); font-weight:700;
    color:var(--ink); letter-spacing:.5px; margin:0 0 10px; line-height:1.25;
}

.event-card small {
    display:inline-flex; align-items:center; gap:8px;
    font-family:'Cinzel',serif; font-size:9px; letter-spacing:2.5px;
    text-transform:uppercase; color:var(--amber); margin-bottom:14px;
}
.event-card small::before { content:'â—†'; font-size:6px; opacity:.7; }

.event-card p {
    font-family:'Raleway',sans-serif; font-size:14.5px;
    line-height:1.95; color:var(--ink-mid); letter-spacing:.2px; margin:0;
    max-width:800px;
}

/* â”€â”€ image divider â”€â”€ */
.ev-img-rule {
    height:1px; margin:0 44px 0 52px;
    background:linear-gradient(90deg, transparent, rgba(184,117,26,.25), transparent);
}

/* â”€â”€ main image wrapper â”€â”€ */
.ev-main-wrap { overflow:hidden; position:relative; }

.event-main-img {
    width:100%; max-height:420px;
    object-fit:cover; display:block;
    transition:transform .7s ease;
}
.event-card:hover .event-main-img { transform:scale(1.025); }

/* fade bottom of main image */
.ev-main-wrap::after {
    content:''; position:absolute; bottom:0; left:0; right:0; height:70px;
    background:linear-gradient(transparent, rgba(253,248,242,.4));
    pointer-events:none;
}

/* â”€â”€ scroll strip â”€â”€ */
.ev-scroll-wrap { padding:18px 44px 28px 52px; }

.ev-scroll-hd {
    font-family:'Cinzel',serif; font-size:8.5px; letter-spacing:3px;
    text-transform:uppercase; color:var(--ink-soft);
    margin-bottom:12px;
    display:flex; align-items:center; gap:12px;
}
.ev-scroll-hd::before { content:'â—†'; color:var(--amber-pale); font-size:7px; }
.ev-scroll-hd::after  { content:''; flex:1; height:1px; background:linear-gradient(90deg,rgba(184,117,26,.2),transparent); }

.event-scroll {
    display:flex; gap:14px; overflow-x:auto;
    padding:4px 2px 12px; scroll-behavior:smooth;
    -webkit-overflow-scrolling:touch;
}

.event-scroll::-webkit-scrollbar { height:4px; }
.event-scroll::-webkit-scrollbar-track { background:rgba(184,117,26,.06); border-radius:4px; }
.event-scroll::-webkit-scrollbar-thumb {
    background:linear-gradient(90deg, var(--amber-pale), var(--amber));
    border-radius:4px;
}

.event-scroll img {
    min-width:195px; height:132px; object-fit:cover;
    border-radius:12px; flex-shrink:0; cursor:pointer;
    border:1.5px solid rgba(184,117,26,.14);
    transition: transform .35s cubic-bezier(.34,1.56,.64,1), box-shadow .3s, border-color .3s;
    box-shadow:0 4px 16px rgba(0,0,0,.07);
}
.event-scroll img:hover {
    transform:scale(1.07) translateY(-4px);
    box-shadow:0 14px 40px rgba(184,117,26,.24);
    border-color:rgba(184,117,26,.45);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.empty-state {
    text-align:center; padding:90px 40px;
    border-radius:24px;
    background: linear-gradient(135deg, var(--cream), rgba(232,192,122,.3));
    border:1px solid rgba(184,117,26,.18);
    box-shadow:0 8px 40px rgba(184,117,26,.08);
}
.empty-icon { font-size:52px; display:block; margin-bottom:20px; animation: heartbeat 2.5s ease-in-out infinite; }
.empty-state p {
    font-family:'Cormorant Garamond',serif; font-style:italic;
    font-size:20px; color:var(--ink-soft); letter-spacing:1px;
}

/* mobile */
@media(max-width:768px){
    .charity-hero    { padding:56px 28px 50px; }
    .event-card-body { padding:26px 22px 26px 30px; }
    .ev-img-rule     { margin:0 22px 0 30px; }
    .ev-scroll-wrap  { padding:14px 22px 22px 30px; }
    .event-scroll img { min-width:155px; height:105px; }
}
</style>


<!-- â•â• HERO â•â• -->
<div class="charity-hero">
    <div class="charity-hero-pat"></div>
    <div class="charity-hero-glow"></div>
    <div class="hero-bracket-tl"></div>
    <div class="hero-bracket-br"></div>

    <div class="charity-heart">â¤ï¸</div>
    <h1 class="charity-title">Charity</h1>
    <p class="charity-subtitle">Humanity in Action</p>

    <div class="hero-orn">
        <div class="hero-orn-l"></div>
        <div class="hero-orn-c"><span>â—†</span><span style="font-size:5px;opacity:.5">â—†</span><span>â—†</span></div>
        <div class="hero-orn-l"></div>
    </div>
</div>


<!-- â•â• CHARITY CARDS â•â• -->
{% for e in items %}
<div class="event-card reveal">

    <div class="event-card-body">
        <h3>{{ e.title }}</h3>
        <small>
    {% if e.event_date %}
        {% if e.event_date.__class__.__name__ == 'date' %}
            {{ e.event_date.strftime('%d-%m-%Y') }}
        {% else %}
            {{ e.event_date }}
        {% endif %}
    {% endif %}
        </small>
        <p>{{ e.description }}</p>
    </div>

    {% if e.image %}
        {% set images = e.image.split(",") %}

        <div class="ev-img-rule"></div>

        <div class="ev-main-wrap">
            <img src="{{ url_for('static', filename=images[0].strip()) }}"
                 class="event-main-img">
        </div>

        {% if images|length > 1 %}
        <div class="ev-scroll-wrap">
            <div class="ev-scroll-hd">More Photos</div>
            <div class="event-scroll">
                {% for img in images[1:] %}
                    <img src="{{ url_for('static', filename=img.strip()) }}">
                {% endfor %}
            </div>
        </div>
        {% endif %}

    {% endif %}

</div>
{% else %}
<div class="empty-state reveal">
    <span class="empty-icon">ğŸ¤</span>
    <p>No charity events added yet.</p>
</div>
{% endfor %}


<script>
(function(){
    const els=document.querySelectorAll('.reveal');
    const io=new IntersectionObserver((entries)=>{
        entries.forEach((e,i)=>{
            if(e.isIntersecting){ setTimeout(()=>e.target.classList.add('visible'),i*100); io.unobserve(e.target); }
        });
    },{threshold:.06});
    els.forEach(el=>io.observe(el));
})();
</script>

{% endblock %}